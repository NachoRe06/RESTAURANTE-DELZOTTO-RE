<div class="configContainer">
  
  @if (cargando) {
    <div class="loadingState">
      <p class="loadingText">â³ Cargando panel de administraciÃ³n...</p>
    </div>
  } 
  @else if (error) {
    <div class="errorState">
      <p class="errorText">âŒ {{ error }}</p>
      <a routerLink="/home" class="backLink">Volver al inicio</a>
    </div>
  } 
  @else if (user) {

    <section class="infoCard">
      <div class="headerRow">
        <h2 class="cardTitle">ğŸª Mi Restaurante</h2>
        <div class="headerActions">
           <button class="iconButton" title="Editar datos" routerLink="/perfiles/edit">âœï¸</button>
           <button class="iconButton danger" title="Eliminar cuenta" (click)="openDeleteConfirm()">ğŸ—‘ï¸</button>
        </div>
      </div>

      <div class="infoList">
        <div class="infoItem">
          <span class="infoLabel">Nombre:</span>
          <span class="infoValue">{{ user.restaurantName }}</span>
        </div>
        <div class="infoItem">
          <span class="infoLabel">DueÃ±o:</span>
          <span class="infoValue">{{ user.firstName }} {{ user.lastName }}</span>
        </div>
        <div class="infoItem">
          <span class="infoLabel">DirecciÃ³n:</span>
          <span class="infoValue">{{ user.address }}</span>
        </div>
        <div class="infoItem">
          <span class="infoLabel">TelÃ©fono:</span>
          <span class="infoValue">{{ user.phoneNumber }}</span>
        </div>
      </div>
    </section>

    <section class="infoCard">
      <div class="headerRow">
        <h3 class="sectionTitle">ğŸ“‚ CategorÃ­as</h3>
        <button class="primaryButton" [routerLink]="['/categoria-pagina/edit', 'nuevo']">
          + Nueva CategorÃ­a
        </button>
      </div>

      <div class="listContainer">
        @for (cat of categories; track cat.id) {
          <div class="listItem">
            <span class="itemName">{{ cat.name }}</span>
            <div class="itemActions">
                <button class="smallButton" [routerLink]="['/categoria-pagina/edit', cat.id]">
                  âœï¸
                </button>
              <button class="smallButton danger" (click)="deleteCategory(cat.id)">ğŸ—‘ï¸</button>
            </div>
          </div>
        } @empty {
          <p class="emptyMessage">No hay categorÃ­as creadas.</p> 
        }
      </div>
    </section>

    <section class="infoCard">
      <div class="headerRow">
        <h3 class="sectionTitle">ğŸ” Mis Productos</h3>
        <button class="primaryButton" [routerLink]="['/productos/edit', 'nuevo']">
          + Nuevo Producto
        </button>
      </div>

      <div class="listContainer">
        @for (prod of products; track prod.id) {
          <div class="listItem">
            <div class="productInfo">
              <span class="itemName">{{ prod.name }}</span>
              <span class="itemPrice">{{ prod.price | currency }}</span>
            </div>
            
            <div class="itemActions">
              <button class="smallButton" [routerLink]="['/productos/edit', prod.id]">
                âœï¸ Editar
              </button>
              <button class="smallButton danger" (click)="deleteProduct(prod.id)">ğŸ—‘ï¸</button>
            </div>
          </div>
        } @empty {
          <p class="emptyMessage">AÃºn no tienes productos en el menÃº.</p>
        }
      </div>
    </section>
    
    <div class="footerActions">
      <a routerLink="/" class="backLink">â† Volver al Home</a>
    </div>

    @if (showDeleteConfirm) {
      <div class="modalOverlay">
        <div class="modalContent">
          <h3 class="modalTitle">âš ï¸ Zona de Peligro</h3>
          <p class="modalText">Â¿EstÃ¡s seguro de que quieres eliminar tu cuenta y todo tu restaurante? Esta acciÃ³n no se puede deshacer.</p>
          <div class="modalActions">
            <button type="button" class="secondaryButton" (click)="closeDeleteConfirm()" [disabled]="isDeleting">
              Cancelar
            </button>
            <button type="button" class="dangerButton" (click)="deleteUser()" [disabled]="isDeleting">
              {{ isDeleting ? 'Eliminando...' : 'SÃ­, Eliminar Todo' }}
            </button>
          </div>
        </div>
      </div>
    }

  } @else {
    <p class="errorText">No se pudo cargar la informaciÃ³n.</p>
  }
</div>